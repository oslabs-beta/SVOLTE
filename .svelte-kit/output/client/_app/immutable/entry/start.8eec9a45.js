import{o as xe,t as _e}from"../chunks/index.a574973e.js";import{S as Me,a as Ve,I as D,g as je,f as $e,b as ye,c as le,s as M,i as we,d as Z,e as G,P as Ce,h as ze}from"../chunks/singletons.ea538e55.js";function Be(t,s){return t==="/"||s==="ignore"?t:s==="never"?t.endsWith("/")?t.slice(0,-1):t:s==="always"&&!t.endsWith("/")?t+"/":t}function Ye(t){return t.split("%25").map(decodeURI).join("%25")}function We(t){for(const s in t)t[s]=decodeURIComponent(t[s]);return t}const Xe=["href","pathname","search","searchParams","toString","toJSON"];function Ze(t,s){const f=new URL(t);for(const r of Xe)Object.defineProperty(f,r,{get(){return s(),t[r]},enumerable:!0,configurable:!0});return Qe(f),f}function Qe(t){Object.defineProperty(t,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const et="/__data.json";function tt(t){return t.replace(/\/$/,"")+et}function He(t){try{return JSON.parse(sessionStorage[t])}catch{}}function De(t,s){const f=JSON.stringify(s);try{sessionStorage[t]=f}catch{}}function nt(...t){let s=5381;for(const f of t)if(typeof f=="string"){let r=f.length;for(;r;)s=s*33^f.charCodeAt(--r)}else if(ArrayBuffer.isView(f)){const r=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);let p=r.length;for(;p;)s=s*33^r[--p]}else throw new TypeError("value must be a string or TypedArray");return(s>>>0).toString(36)}const fe=window.fetch;window.fetch=(t,s)=>((t instanceof Request?t.method:s?.method||"GET")!=="GET"&&ee.delete(Se(t)),fe(t,s));const ee=new Map;function at(t,s){const f=Se(t,s),r=document.querySelector(f);if(r?.textContent){const{body:p,...l}=JSON.parse(r.textContent),S=r.getAttribute("data-ttl");return S&&ee.set(f,{body:p,init:l,ttl:1e3*Number(S)}),Promise.resolve(new Response(p,l))}return fe(t,s)}function rt(t,s,f){if(ee.size>0){const r=Se(t,f),p=ee.get(r);if(p){if(performance.now()<p.ttl&&["default","force-cache","only-if-cached",void 0].includes(f?.cache))return new Response(p.body,p.init);ee.delete(r)}}return fe(s,f)}function Se(t,s){let r=`script[data-sveltekit-fetched][data-url=${JSON.stringify(t instanceof Request?t.url:t)}]`;if(s?.headers||s?.body){const p=[];s.headers&&p.push([...new Headers(s.headers)].join(",")),s.body&&(typeof s.body=="string"||ArrayBuffer.isView(s.body))&&p.push(s.body),r+=`[data-hash="${nt(...p)}"]`}return r}const ot=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function st(t){const s=[];return{pattern:t==="/"?/^\/$/:new RegExp(`^${ct(t).map(r=>{const p=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(r);if(p)return s.push({name:p[1],matcher:p[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const l=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(r);if(l)return s.push({name:l[1],matcher:l[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!r)return;const S=r.split(/\[(.+?)\](?!\])/);return"/"+S.map((y,_)=>{if(_%2){if(y.startsWith("x+"))return ve(String.fromCharCode(parseInt(y.slice(2),16)));if(y.startsWith("u+"))return ve(String.fromCharCode(...y.slice(2).split("-").map($=>parseInt($,16))));const d=ot.exec(y);if(!d)throw new Error(`Invalid param: ${y}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,U,L,b,O]=d;return s.push({name:b,matcher:O,optional:!!U,rest:!!L,chained:L?_===1&&S[0]==="":!1}),L?"(.*?)":U?"([^/]*)?":"([^/]+?)"}return ve(y)}).join("")}).join("")}/?$`),params:s}}function it(t){return!/^\([^)]+\)$/.test(t)}function ct(t){return t.slice(1).split("/").filter(it)}function lt(t,s,f){const r={},p=t.slice(1);let l=0;for(let S=0;S<s.length;S+=1){const i=s[S],y=p[S-l];if(i.chained&&i.rest&&l){r[i.name]=p.slice(S-l,S+1).filter(_=>_).join("/"),l=0;continue}if(y===void 0){i.rest&&(r[i.name]="");continue}if(!i.matcher||f[i.matcher](y)){r[i.name]=y;const _=s[S+1],d=p[S+1];_&&!_.rest&&_.optional&&d&&(l=0);continue}if(i.optional&&i.chained){l++;continue}return}if(!l)return r}function ve(t){return t.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function ft({nodes:t,server_loads:s,dictionary:f,matchers:r}){const p=new Set(s);return Object.entries(f).map(([i,[y,_,d]])=>{const{pattern:U,params:L}=st(i),b={id:i,exec:O=>{const $=U.exec(O);if($)return lt($,L,r)},errors:[1,...d||[]].map(O=>t[O]),layouts:[0,..._||[]].map(S),leaf:l(y)};return b.errors.length=b.layouts.length=Math.max(b.errors.length,b.layouts.length),b});function l(i){const y=i<0;return y&&(i=~i),[y,t[i]]}function S(i){return i===void 0?i:[p.has(i),t[i]]}}let Q=class{constructor(s,f){this.status=s,typeof f=="string"?this.body={message:f}:f?this.body=f:this.body={message:`Error: ${s}`}}toString(){return JSON.stringify(this.body)}},qe=class{constructor(s,f){this.status=s,this.location=f}};async function ut(t){for(const s in t)if(typeof t[s]?.then=="function")return Object.fromEntries(await Promise.all(Object.entries(t).map(async([f,r])=>[f,await r])));return t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");const dt=-1,pt=-2,ht=-3,mt=-4,gt=-5,_t=-6;function yt(t,s){if(typeof t=="number")return p(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const f=t,r=Array(f.length);function p(l,S=!1){if(l===dt)return;if(l===ht)return NaN;if(l===mt)return 1/0;if(l===gt)return-1/0;if(l===_t)return-0;if(S)throw new Error("Invalid input");if(l in r)return r[l];const i=f[l];if(!i||typeof i!="object")r[l]=i;else if(Array.isArray(i))if(typeof i[0]=="string"){const y=i[0],_=s?.[y];if(_)return r[l]=_(p(i[1]));switch(y){case"Date":r[l]=new Date(i[1]);break;case"Set":const d=new Set;r[l]=d;for(let b=1;b<i.length;b+=1)d.add(p(i[b]));break;case"Map":const U=new Map;r[l]=U;for(let b=1;b<i.length;b+=2)U.set(p(i[b]),p(i[b+1]));break;case"RegExp":r[l]=new RegExp(i[1],i[2]);break;case"Object":r[l]=Object(i[1]);break;case"BigInt":r[l]=BigInt(i[1]);break;case"null":const L=Object.create(null);r[l]=L;for(let b=1;b<i.length;b+=2)L[i[b]]=p(i[b+1]);break;default:throw new Error(`Unknown type ${y}`)}}else{const y=new Array(i.length);r[l]=y;for(let _=0;_<i.length;_+=1){const d=i[_];d!==pt&&(y[_]=p(d))}}else{const y={};r[l]=y;for(const _ in i){const d=i[_];y[_]=p(d)}}return r[l]}return p(0)}const Ge=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...Ge];const wt=new Set([...Ge,"actions"]);[...wt];function vt(t){return t.filter(s=>s!=null)}const bt="x-sveltekit-invalidated",J=He(Me)??{},X=He(Ve)??{};function be(t){J[t]=Z()}function Et(t,s){const f=ft(t),r=t.nodes[0],p=t.nodes[1];r(),p();const l=document.documentElement,S=[],i=[];let y=null;const _={before_navigate:[],after_navigate:[]};let d={branch:[],error:null,url:null},U=!1,L=!1,b=!0,O=!1,$=!1,V=!1,H=!1,K,I=history.state?.[D];I||(I=Date.now(),history.replaceState({...history.state,[D]:I},"",location.href));const ue=J[I];ue&&(history.scrollRestoration="manual",scrollTo(ue.x,ue.y));let F,te,ne;async function ke(){ne=ne||Promise.resolve(),await ne,ne=null;const e=new URL(location.href),a=Y(e,!0);y=null;const n=te={},o=a&&await he(a);if(n===te&&o){if(o.type==="redirect")return ae(new URL(o.location,e).href,{},[e.pathname],n);o.props.page!==void 0&&(F=o.props.page),K.$set(o.props)}}function Re(e){i.some(a=>a?.snapshot)&&(X[e]=i.map(a=>a?.snapshot?.capture()))}function Ae(e){X[e]?.forEach((a,n)=>{i[n]?.snapshot?.restore(a)})}function Le(){be(I),De(Me,J),Re(I),De(Ve,X)}async function ae(e,{noScroll:a=!1,replaceState:n=!1,keepFocus:o=!1,state:c={},invalidateAll:u=!1},m,v){return typeof e=="string"&&(e=new URL(e,je(document))),ie({url:e,scroll:a?Z():null,keepfocus:o,redirect_chain:m,details:{state:c,replaceState:n},nav_token:v,accepted:()=>{u&&(H=!0)},blocked:()=>{},type:"goto"})}async function Oe(e){return y={id:e.id,promise:he(e).then(a=>(a.type==="loaded"&&a.state.error&&(y=null),a))},y.promise}async function re(...e){const n=f.filter(o=>e.some(c=>o.exec(c))).map(o=>Promise.all([...o.layouts,o.leaf].map(c=>c?.[1]())));await Promise.all(n)}function Ie(e){d=e.state;const a=document.querySelector("style[data-sveltekit]");a&&a.remove(),F=e.props.page,K=new t.root({target:s,props:{...e.props,stores:M,components:i},hydrate:!0}),Ae(I);const n={from:null,to:{params:d.params,route:{id:d.route?.id??null},url:new URL(location.href)},willUnload:!1,type:"enter"};_.after_navigate.forEach(o=>o(n)),L=!0}async function B({url:e,params:a,branch:n,status:o,error:c,route:u,form:m}){let v="never";for(const h of n)h?.slash!==void 0&&(v=h.slash);e.pathname=Be(e.pathname,v),e.search=e.search;const E={type:"loaded",state:{url:e,params:a,branch:n,error:c,route:u},props:{constructors:vt(n).map(h=>h.node.component)}};m!==void 0&&(E.props.form=m);let w={},A=!F,g=0;for(let h=0;h<Math.max(n.length,d.branch.length);h+=1){const P=n[h],q=d.branch[h];P?.data!==q?.data&&(A=!0),P&&(w={...w,...P.data},A&&(E.props[`data_${g}`]=w),g+=1)}return(!d.url||e.href!==d.url.href||d.error!==c||m!==void 0&&m!==F.form||A)&&(E.props.page={error:c,params:a,route:{id:u?.id??null},status:o,url:new URL(e),form:m??null,data:A?w:F.data}),E}async function de({loader:e,parent:a,url:n,params:o,route:c,server_data_node:u}){let m=null;const v={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},E=await e();if(E.universal?.load){let w=function(...g){for(const k of g){const{href:h}=new URL(k,n);v.dependencies.add(h)}};const A={route:{get id(){return v.route=!0,c.id}},params:new Proxy(o,{get:(g,k)=>(v.params.add(k),g[k])}),data:u?.data??null,url:Ze(n,()=>{v.url=!0}),async fetch(g,k){let h;g instanceof Request?(h=g.url,k={body:g.method==="GET"||g.method==="HEAD"?void 0:await g.blob(),cache:g.cache,credentials:g.credentials,headers:g.headers,integrity:g.integrity,keepalive:g.keepalive,method:g.method,mode:g.mode,redirect:g.redirect,referrer:g.referrer,referrerPolicy:g.referrerPolicy,signal:g.signal,...k}):h=g;const P=new URL(h,n);return w(P.href),P.origin===n.origin&&(h=P.href.slice(n.origin.length)),L?rt(h,P.href,k):at(h,k)},setHeaders:()=>{},depends:w,parent(){return v.parent=!0,a()}};m=await E.universal.load.call(null,A)??null,m=m?await ut(m):null}return{node:E,loader:e,server:u,universal:E.universal?.load?{type:"data",data:m,uses:v}:null,data:m??u?.data??null,slash:E.universal?.trailingSlash??u?.slash}}function Pe(e,a,n,o,c){if(H)return!0;if(!o)return!1;if(o.parent&&e||o.route&&a||o.url&&n)return!0;for(const u of o.params)if(c[u]!==d.params[u])return!0;for(const u of o.dependencies)if(S.some(m=>m(new URL(u))))return!0;return!1}function pe(e,a){return e?.type==="data"?e:e?.type==="skip"?a??null:null}async function he({id:e,invalidating:a,url:n,params:o,route:c}){if(y?.id===e)return y.promise;const{errors:u,layouts:m,leaf:v}=c,E=[...m,v];u.forEach(R=>R?.().catch(()=>{})),E.forEach(R=>R?.[1]().catch(()=>{}));let w=null;const A=d.url?e!==d.url.pathname+d.url.search:!1,g=d.route?c.id!==d.route.id:!1;let k=!1;const h=E.map((R,T)=>{const j=d.branch[T],x=!!R?.[0]&&(j?.loader!==R[1]||Pe(k,g,A,j.server?.uses,o));return x&&(k=!0),x});if(h.some(Boolean)){try{w=await Fe(n,h)}catch(R){return oe({status:R instanceof Q?R.status:500,error:await W(R,{url:n,params:o,route:{id:c.id}}),url:n,route:c})}if(w.type==="redirect")return w}const P=w?.nodes;let q=!1;const N=E.map(async(R,T)=>{if(!R)return;const j=d.branch[T],x=P?.[T];if((!x||x.type==="skip")&&R[1]===j?.loader&&!Pe(q,g,A,j.universal?.uses,o))return j;if(q=!0,x?.type==="error")throw x;return de({loader:R[1],url:n,params:o,route:c,parent:async()=>{const me={};for(let ge=0;ge<T;ge+=1)Object.assign(me,(await N[ge])?.data);return me},server_data_node:pe(x===void 0&&R[0]?{type:"skip"}:x??null,R[0]?j?.server:void 0)})});for(const R of N)R.catch(()=>{});const C=[];for(let R=0;R<E.length;R+=1)if(E[R])try{C.push(await N[R])}catch(T){if(T instanceof qe)return{type:"redirect",location:T.location};let j=500,x;if(P?.includes(T))j=T.status??j,x=T.error;else if(T instanceof Q)j=T.status,x=T.body;else{if(await M.updated.check())return await z(n);x=await W(T,{params:o,url:n,route:{id:c.id}})}const ce=await Ue(R,C,u);return ce?await B({url:n,params:o,branch:C.slice(0,ce.idx).concat(ce.node),status:j,error:x,route:c}):await Te(n,{id:c.id},x,j)}else C.push(void 0);return await B({url:n,params:o,branch:C,status:200,error:null,route:c,form:a?void 0:null})}async function Ue(e,a,n){for(;e--;)if(n[e]){let o=e;for(;!a[o];)o-=1;try{return{idx:o+1,node:{node:await n[e](),loader:n[e],data:{},server:null,universal:null}}}catch{continue}}}async function oe({status:e,error:a,url:n,route:o}){const c={};let u=null;if(t.server_loads[0]===0)try{const w=await Fe(n,[!0]);if(w.type!=="data"||w.nodes[0]&&w.nodes[0].type!=="data")throw 0;u=w.nodes[0]??null}catch{(n.origin!==location.origin||n.pathname!==location.pathname||U)&&await z(n)}const v=await de({loader:r,url:n,params:c,route:o,parent:()=>Promise.resolve({}),server_data_node:pe(u)}),E={node:await p(),loader:p,universal:null,server:null,data:null};return await B({url:n,params:c,branch:[v,E],status:e,error:a,route:null})}function Y(e,a){if(we(e,G))return;const n=se(e);for(const o of f){const c=o.exec(n);if(c)return{id:e.pathname+e.search,invalidating:a,route:o,params:We(c),url:e}}}function se(e){return Ye(e.pathname.slice(G.length)||"/")}function Ne({url:e,type:a,intent:n,delta:o}){let c=!1;const u={from:{params:d.params,route:{id:d.route?.id??null},url:d.url},to:{params:n?.params??null,route:{id:n?.route?.id??null},url:e},willUnload:!n,type:a};o!==void 0&&(u.delta=o);const m={...u,cancel:()=>{c=!0}};return $||_.before_navigate.forEach(v=>v(m)),c?null:u}async function ie({url:e,scroll:a,keepfocus:n,redirect_chain:o,details:c,type:u,delta:m,nav_token:v={},accepted:E,blocked:w}){const A=Y(e,!1),g=Ne({url:e,type:u,delta:m,intent:A});if(!g){w();return}const k=I;E(),$=!0,L&&M.navigating.set(g),te=v;let h=A&&await he(A);if(!h){if(we(e,G))return await z(e);h=await Te(e,{id:null},await W(new Error(`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=A?.url||e,te!==v)return!1;if(h.type==="redirect")if(o.length>10||o.includes(e.pathname))h=await oe({status:500,error:await W(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return ae(new URL(h.location,e).href,{},[...o,e.pathname],v),!1;else h.props.page?.status>=400&&await M.updated.check()&&await z(e);if(S.length=0,H=!1,O=!0,be(k),Re(k),h.props.page?.url&&h.props.page.url.pathname!==e.pathname&&(e.pathname=h.props.page?.url.pathname),c){const N=c.replaceState?0:1;if(c.state[D]=I+=N,history[c.replaceState?"replaceState":"pushState"](c.state,"",e),!c.replaceState){let C=I+1;for(;X[C]||J[C];)delete X[C],delete J[C],C+=1}}y=null,L?(d=h.state,h.props.page&&(h.props.page.url=e),K.$set(h.props)):Ie(h);const{activeElement:P}=document;if(await _e(),b){const N=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));a?scrollTo(a.x,a.y):N?N.scrollIntoView():scrollTo(0,0)}const q=document.activeElement!==P&&document.activeElement!==document.body;!n&&!q&&Ee(),b=!0,h.props.page&&(F=h.props.page),$=!1,u==="popstate"&&Ae(I),_.after_navigate.forEach(N=>N(g)),M.navigating.set(null),O=!1}async function Te(e,a,n,o){return e.origin===location.origin&&e.pathname===location.pathname&&!U?await oe({status:o,error:n,url:e,route:a}):await z(e)}function z(e){return location.href=e.href,new Promise(()=>{})}function Ke(){let e;l.addEventListener("mousemove",u=>{const m=u.target;clearTimeout(e),e=setTimeout(()=>{o(m,2)},20)});function a(u){o(u.composedPath()[0],1)}l.addEventListener("mousedown",a),l.addEventListener("touchstart",a,{passive:!0});const n=new IntersectionObserver(u=>{for(const m of u)m.isIntersecting&&(re(se(new URL(m.target.href))),n.unobserve(m.target))},{threshold:0});function o(u,m){const v=$e(u,l);if(!v)return;const{url:E,external:w,download:A}=ye(v,G);if(w||A)return;const g=le(v);if(!g.reload)if(m<=g.preload_data){const k=Y(E,!1);k&&Oe(k)}else m<=g.preload_code&&re(se(E))}function c(){n.disconnect();for(const u of l.querySelectorAll("a")){const{url:m,external:v,download:E}=ye(u,G);if(v||E)continue;const w=le(u);w.reload||(w.preload_code===Ce.viewport&&n.observe(u),w.preload_code===Ce.eager&&re(se(m)))}}_.after_navigate.push(c),c()}function W(e,a){return e instanceof Q?e.body:t.hooks.handleError({error:e,event:a})??{message:a.route.id!=null?"Internal Error":"Not Found"}}return{after_navigate:e=>{xe(()=>(_.after_navigate.push(e),()=>{const a=_.after_navigate.indexOf(e);_.after_navigate.splice(a,1)}))},before_navigate:e=>{xe(()=>(_.before_navigate.push(e),()=>{const a=_.before_navigate.indexOf(e);_.before_navigate.splice(a,1)}))},disable_scroll_handling:()=>{(O||!L)&&(b=!1)},goto:(e,a={})=>ae(e,a,[]),invalidate:e=>{if(typeof e=="function")S.push(e);else{const{href:a}=new URL(e,location.href);S.push(n=>n.href===a)}return ke()},invalidate_all:()=>(H=!0,ke()),preload_data:async e=>{const a=new URL(e,je(document)),n=Y(a,!1);if(!n)throw new Error(`Attempted to preload a URL that does not belong to this app: ${a}`);await Oe(n)},preload_code:re,apply_action:async e=>{if(e.type==="error"){const a=new URL(location.href),{branch:n,route:o}=d;if(!o)return;const c=await Ue(d.branch.length,n,o.errors);if(c){const u=await B({url:a,params:d.params,branch:n.slice(0,c.idx).concat(c.node),status:e.status??500,error:e.error,route:o});d=u.state,K.$set(u.props),_e().then(Ee)}}else e.type==="redirect"?ae(e.location,{invalidateAll:!0},[]):(K.$set({form:null,page:{...F,form:e.data,status:e.status}}),await _e(),K.$set({form:e.data}),e.type==="success"&&Ee())},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",e=>{let a=!1;if(Le(),!$){const n={from:{params:d.params,route:{id:d.route?.id??null},url:d.url},to:null,willUnload:!0,type:"leave",cancel:()=>a=!0};_.before_navigate.forEach(o=>o(n))}a?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Le()}),navigator.connection?.saveData||Ke(),l.addEventListener("click",e=>{if(e.button||e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.defaultPrevented)return;const a=$e(e.composedPath()[0],l);if(!a)return;const{url:n,external:o,target:c,download:u}=ye(a,G);if(!n)return;if(c==="_parent"||c==="_top"){if(window.parent!==window)return}else if(c&&c!=="_self")return;const m=le(a);if(!(a instanceof SVGAElement)&&n.protocol!==location.protocol&&!(n.protocol==="https:"||n.protocol==="http:")||u)return;if(o||m.reload){Ne({url:n,type:"link"})?$=!0:e.preventDefault();return}const[E,w]=n.href.split("#");if(w!==void 0&&E===location.href.split("#")[0]){if(V=!0,be(I),d.url=n,M.page.set({...F,url:n}),M.page.notify(),!m.replace_state)return;V=!1,e.preventDefault()}ie({url:n,scroll:m.noscroll?Z():null,keepfocus:m.keep_focus??!1,redirect_chain:[],details:{state:{},replaceState:m.replace_state??n.href===location.href},accepted:()=>e.preventDefault(),blocked:()=>e.preventDefault(),type:"link"})}),l.addEventListener("submit",e=>{if(e.defaultPrevented)return;const a=HTMLFormElement.prototype.cloneNode.call(e.target),n=e.submitter;if((n?.formMethod||a.method)!=="get")return;const c=new URL(n?.hasAttribute("formaction")&&n?.formAction||a.action);if(we(c,G))return;const u=e.target,{keep_focus:m,noscroll:v,reload:E,replace_state:w}=le(u);if(E)return;e.preventDefault(),e.stopPropagation();const A=new FormData(u),g=n?.getAttribute("name");g&&A.append(g,n?.getAttribute("value")??""),c.search=new URLSearchParams(A).toString(),ie({url:c,scroll:v?Z():null,keepfocus:m??!1,redirect_chain:[],details:{state:{},replaceState:w??c.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",async e=>{if(e.state?.[D]){if(e.state[D]===I)return;const a=J[e.state[D]];if(d.url.href.split("#")[0]===location.href.split("#")[0]){J[I]=Z(),I=e.state[D],scrollTo(a.x,a.y);return}const n=e.state[D]-I;await ie({url:new URL(location.href),scroll:a,keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{I=e.state[D]},blocked:()=>{history.go(-n)},type:"popstate",delta:n})}}),addEventListener("hashchange",()=>{V&&(V=!1,history.replaceState({...history.state,[D]:++I},"",location.href))});for(const e of document.querySelectorAll("link"))e.rel==="icon"&&(e.href=e.href);addEventListener("pageshow",e=>{e.persisted&&M.navigating.set(null)})},_hydrate:async({status:e=200,error:a,node_ids:n,params:o,route:c,data:u,form:m})=>{U=!0;const v=new URL(location.href);({params:o={},route:c={id:null}}=Y(v,!1)||{});let E;try{const w=n.map(async(k,h)=>{const P=u[h];return P?.uses&&(P.uses=Je(P.uses)),de({loader:t.nodes[k],url:v,params:o,route:c,parent:async()=>{const q={};for(let N=0;N<h;N+=1)Object.assign(q,(await w[N]).data);return q},server_data_node:pe(P)})}),A=await Promise.all(w),g=f.find(({id:k})=>k===c.id);if(g){const k=g.layouts;for(let h=0;h<k.length;h++)k[h]||A.splice(h,0,void 0)}E=await B({url:v,params:o,branch:A,status:e,error:a,form:m,route:g??null})}catch(w){if(w instanceof qe){await z(new URL(w.location,location.href));return}E=await oe({status:w instanceof Q?w.status:500,error:await W(w,{url:v,params:o,route:c}),url:v,route:c})}Ie(E)}}}async function Fe(t,s){const f=new URL(t);f.pathname=tt(t.pathname),f.searchParams.append(bt,s.map(p=>p?"1":"0").join(""));const r=await fe(f.href);if(!r.ok)throw new Q(r.status,await r.json());return new Promise(async p=>{const l=new Map,S=r.body.getReader(),i=new TextDecoder;function y(d){return yt(d,{Promise:U=>new Promise((L,b)=>{l.set(U,{fulfil:L,reject:b})})})}let _="";for(;;){const{done:d,value:U}=await S.read();if(d&&!_)break;for(_+=!U&&_?`
`:i.decode(U);;){const L=_.indexOf(`
`);if(L===-1)break;const b=JSON.parse(_.slice(0,L));if(_=_.slice(L+1),b.type==="redirect")return p(b);if(b.type==="data")b.nodes?.forEach(O=>{O?.type==="data"&&(O.uses=Je(O.uses),O.data=y(O.data))}),p(b);else if(b.type==="chunk"){const{id:O,data:$,error:V}=b,H=l.get(O);l.delete(O),V?H.reject(y(V)):H.fulfil(y($))}}}})}function Je(t){return{dependencies:new Set(t?.dependencies??[]),params:new Set(t?.params??[]),parent:!!t?.parent,route:!!t?.route,url:!!t?.url}}function Ee(){const t=document.querySelector("[autofocus]");if(t)t.focus();else{const s=document.body,f=s.getAttribute("tabindex");s.tabIndex=-1,s.focus({preventScroll:!0,focusVisible:!1}),f!==null?s.setAttribute("tabindex",f):s.removeAttribute("tabindex");const r=getSelection();if(r&&r.type!=="None"){const p=[];for(let l=0;l<r.rangeCount;l+=1)p.push(r.getRangeAt(l));setTimeout(()=>{if(r.rangeCount===p.length){for(let l=0;l<r.rangeCount;l+=1){const S=p[l],i=r.getRangeAt(l);if(S.commonAncestorContainer!==i.commonAncestorContainer||S.startContainer!==i.startContainer||S.endContainer!==i.endContainer||S.startOffset!==i.startOffset||S.endOffset!==i.endOffset)return}r.removeAllRanges()}})}}}async function Lt(t,s,f){const r=Et(t,s);ze({client:r}),f?await r._hydrate(f):r.goto(location.href,{replaceState:!0}),r._start_router()}export{Lt as start};
